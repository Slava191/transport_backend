{"version":3,"sources":["webpack:///./src/components/ATS/Create.vue","webpack:///./src/components/ATS/Create.vue?0aa0"],"names":["class","postUrl","correspondence","ATS","URLs","post","formFieldsProp","create","$event","filesFromServer","fileReadyForUpload","fileDetachFromUpload","components","CreateForm","FileUpload","data","SelectFromList","attachedFiles","formData","FormData","methods","file","this","push","filter","item","name","Object","keys","forEach","key","append","method","url","$router","alert","render"],"mappings":"qJAEQ,eAAoE,MAAhEA,MAAM,qBAAoB,qCAAiC,G,mHADnE,eAmBM,YAlBF,EAEA,eAcc,GAbTC,QAAS,EAAAC,eAAeC,IAAIC,KAAKC,KACjCC,eAAc,kBAAwB,iBAAe,IAAI,QAGzD,SAAM,+BAAE,EAAAC,OAAOC,M,yBAGhB,iBAIE,CAJF,eAIE,GAHGC,gBAAiB,GACjB,0BAAqB,+BAAE,EAAAC,mBAAmBF,KAC1C,4BAAuB,+BAAE,EAAAG,qBAAqBH,W,mKAczDN,EAAiB,EAAQ,QAIhB,GACXU,WAAW,CAAEC,aAAA,KAAYC,aAAA,MACzBC,KAFW,WAGP,MAAM,CACFC,iBAAA,KACAd,iBACAe,cAAe,GACfC,SAAU,IAAIC,WAGtBC,QAAQ,CACJV,mBADI,SACeW,GAEfC,KAAKL,cAAcM,KAAKF,IAG5BV,qBANI,SAMiBU,GAEjBC,KAAKL,cAAgBK,KAAKL,cAAcO,QAAO,SAAAC,GAAG,OAAKA,EAAKC,OAAOL,EAAKK,SAGtEnB,OAXF,SAWSQ,GAAK,wKAIVY,OAAOC,KAAKb,GAAMc,SAAQ,SAACC,GACpBf,EAAKe,IACJ,EAAKZ,SAASa,OAAOD,EAAKf,EAAKe,OAGvC,EAAKb,cAAcY,SAAQ,SAAAR,GACvB,EAAKH,SAASa,OAAO,QAASV,MAVxB,SAaJ,eAAM,CACRW,OAAQ,OACRC,IAAK,MACLlB,KAAM,EAAKG,WAhBL,OAoBV,EAAKgB,QAAQX,KAAK,KApBR,mDAuBVY,MAAM,UAvBI,8DCnD1B,EAAOC,OAASA,EAED","file":"js/chunk-2d0c8270.00ac9783.js","sourcesContent":["<template>\r\n    <div>\r\n        <h1 class=\"font-weight-light\">Добавление транспортного средства</h1>\r\n        \r\n        <create-form \r\n            :postUrl=\"correspondence.ATS.URLs.post\"\r\n            :formFieldsProp='{\r\n                ...correspondence.ATS.fields,\r\n            }'\r\n            @create=\"create($event)\"\r\n        >\r\n\r\n            <FileUpload \r\n                :filesFromServer=\"[]\"\r\n                @file-ready-for-upload=\"fileReadyForUpload($event)\"\r\n                @file-detach-from-upload=\"fileDetachFromUpload($event)\"\r\n            />\r\n            \r\n        </create-form>\r\n\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n\r\nimport CreateForm from '@/components/basic/CreateForm.vue'\r\nimport SelectFromList from '@/components/elements/SelectFromList.vue'\r\nimport FileUpload from '@/components/elements/FileUpload.vue'\r\n\r\nconst correspondence = require('@/utility/correspondence')\r\n\r\nimport Axios from '@/axios'\r\n\r\nexport default {\r\n    components:{ CreateForm, FileUpload },\r\n    data(){\r\n        return{\r\n            SelectFromList,\r\n            correspondence,\r\n            attachedFiles: [],\r\n            formData: new FormData()\r\n        }\r\n    },\r\n    methods:{\r\n        fileReadyForUpload(file){\r\n\r\n            this.attachedFiles.push(file)\r\n\r\n        },\r\n        fileDetachFromUpload(file){\r\n\r\n            this.attachedFiles = this.attachedFiles.filter(item => item.name!==file.name)\r\n\r\n        },\r\n        async create(data){\r\n\r\n            try{\r\n\r\n                Object.keys(data).forEach((key) => {\r\n                    if(data[key])\r\n                        this.formData.append(key, data[key])\r\n                })\r\n\r\n                this.attachedFiles.forEach(file => {\r\n                    this.formData.append(\"files\", file)\r\n                })\r\n\r\n                await Axios({\r\n                    method: 'post',\r\n                    url: \"ATS\",\r\n                    data: this.formData\r\n                })\r\n\r\n                \r\n                this.$router.push(\"/\")\r\n\r\n            }catch(err){\r\n                alert(\"Ошибка\")\r\n            }\r\n\r\n        }\r\n    }\r\n}\r\n\r\n</script>","import { render } from \"./Create.vue?vue&type=template&id=3711c300&bindings={\\\"SelectFromList\\\":\\\"data\\\",\\\"correspondence\\\":\\\"data\\\",\\\"attachedFiles\\\":\\\"data\\\",\\\"formData\\\":\\\"data\\\",\\\"fileReadyForUpload\\\":\\\"options\\\",\\\"fileDetachFromUpload\\\":\\\"options\\\",\\\"create\\\":\\\"options\\\"}\"\nimport script from \"./Create.vue?vue&type=script&lang=js\"\nexport * from \"./Create.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script"],"sourceRoot":""}