(function(e){function t(t){for(var r,a,i=t[0],o=t[1],s=t[2],d=0,l=[];d<i.length;d++)a=i[d],Object.prototype.hasOwnProperty.call(c,a)&&c[a]&&l.push(c[a][0]),c[a]=0;for(r in o)Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r]);b&&b(t);while(l.length)l.shift()();return u.push.apply(u,s||[]),n()}function n(){for(var e,t=0;t<u.length;t++){for(var n=u[t],r=!0,a=1;a<n.length;a++){var i=n[a];0!==c[i]&&(r=!1)}r&&(u.splice(t--,1),e=o(o.s=n[0]))}return e}var r={},a={app:0},c={app:0},u=[];function i(e){return o.p+"js/"+({}[e]||e)+"."+{"chunk-0109e9eb":"337b9adc","chunk-0209f83d":"2570fbe7","chunk-1251c038":"b4bce803","chunk-1c74a68c":"b6ca9c80","chunk-27a54442":"40a8d2b9","chunk-2b6c59ac":"65b77191","chunk-2d0d0286":"b6bf5e36","chunk-414d9a80":"e4d4a8b8","chunk-519dfd6a":"043064dd","chunk-5269d2e8":"7f1b4903","chunk-5c83013e":"e1496ae2","chunk-5c83ab13":"6a4a84b3","chunk-6b5d797b":"9f219e62","chunk-9d5c19fe":"83428f73","chunk-a8599adc":"e2c329c9","chunk-e92bff2c":"285d6b05","chunk-f6a144c2":"e3adc11e"}[e]+".js"}function o(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.e=function(e){var t=[],n={"chunk-519dfd6a":1};a[e]?t.push(a[e]):0!==a[e]&&n[e]&&t.push(a[e]=new Promise((function(t,n){for(var r="css/"+({}[e]||e)+"."+{"chunk-0109e9eb":"31d6cfe0","chunk-0209f83d":"31d6cfe0","chunk-1251c038":"31d6cfe0","chunk-1c74a68c":"31d6cfe0","chunk-27a54442":"31d6cfe0","chunk-2b6c59ac":"31d6cfe0","chunk-2d0d0286":"31d6cfe0","chunk-414d9a80":"31d6cfe0","chunk-519dfd6a":"8a14ad8d","chunk-5269d2e8":"31d6cfe0","chunk-5c83013e":"31d6cfe0","chunk-5c83ab13":"31d6cfe0","chunk-6b5d797b":"31d6cfe0","chunk-9d5c19fe":"31d6cfe0","chunk-a8599adc":"31d6cfe0","chunk-e92bff2c":"31d6cfe0","chunk-f6a144c2":"31d6cfe0"}[e]+".css",c=o.p+r,u=document.getElementsByTagName("link"),i=0;i<u.length;i++){var s=u[i],d=s.getAttribute("data-href")||s.getAttribute("href");if("stylesheet"===s.rel&&(d===r||d===c))return t()}var l=document.getElementsByTagName("style");for(i=0;i<l.length;i++){s=l[i],d=s.getAttribute("data-href");if(d===r||d===c)return t()}var b=document.createElement("link");b.rel="stylesheet",b.type="text/css",b.onload=t,b.onerror=function(t){var r=t&&t.target&&t.target.src||c,u=new Error("Loading CSS chunk "+e+" failed.\n("+r+")");u.code="CSS_CHUNK_LOAD_FAILED",u.request=r,delete a[e],b.parentNode.removeChild(b),n(u)},b.href=c;var h=document.getElementsByTagName("head")[0];h.appendChild(b)})).then((function(){a[e]=0})));var r=c[e];if(0!==r)if(r)t.push(r[2]);else{var u=new Promise((function(t,n){r=c[e]=[t,n]}));t.push(r[2]=u);var s,d=document.createElement("script");d.charset="utf-8",d.timeout=120,o.nc&&d.setAttribute("nonce",o.nc),d.src=i(e);var l=new Error;s=function(t){d.onerror=d.onload=null,clearTimeout(b);var n=c[e];if(0!==n){if(n){var r=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src;l.message="Loading chunk "+e+" failed.\n("+r+": "+a+")",l.name="ChunkLoadError",l.type=r,l.request=a,n[1](l)}c[e]=void 0}};var b=setTimeout((function(){s({type:"timeout",target:d})}),12e4);d.onerror=d.onload=s,document.head.appendChild(d)}return Promise.all(t)},o.m=e,o.c=r,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(n,r,function(t){return e[t]}.bind(null,r));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/",o.oe=function(e){throw console.error(e),e};var s=window["webpackJsonp"]=window["webpackJsonp"]||[],d=s.push.bind(s);s.push=t,s=s.slice();for(var l=0;l<s.length;l++)t(s[l]);var b=d;u.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("7a23"),a=(n("b0c0"),{class:"navbar navbar-expand-lg navbar-dark bg-dark shadow-sm"}),c={class:"container-fluid"},u=Object(r["f"])("Ditctionary KTG"),i=Object(r["g"])("button",{class:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarNav","aria-controls":"navbarNav","aria-expanded":"false","aria-label":"Toggle navigation"},[Object(r["g"])("span",{class:"navbar-toggler-icon"})],-1),o={class:"collapse navbar-collapse right",id:"navbarNav"},s={class:"navbar-nav"},d={class:"dropdown"},l=Object(r["g"])("a",{class:"nav-link dropdown-toggle",type:"button",id:"dropdownMenuButton","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}," Управление справочниками ",-1),b={class:"dropdown-menu","aria-labelledby":"dropdownMenuButton"},h={key:0,class:"nav-item"},f=Object(r["f"])("Создать пользователя"),m={key:1,class:"nav-item"},p=Object(r["f"])("Войти"),g={key:2,class:"nav-item"},k=Object(r["f"])("Зарегистрироваться"),j={class:"container mt-3"};function O(e,t,n,O,v,y){var A=Object(r["y"])("router-link"),q=Object(r["y"])("router-view");return Object(r["q"])(),Object(r["d"])("div",null,[Object(r["g"])("nav",a,[Object(r["g"])("div",c,[Object(r["g"])(A,{class:"navbar-brand",to:"/"},{default:Object(r["I"])((function(){return[u]})),_:1}),i,Object(r["g"])("div",o,[Object(r["g"])("ul",s,[Object(r["g"])("div",d,[l,Object(r["g"])("div",b,[(Object(r["q"])(!0),Object(r["d"])(r["a"],null,Object(r["w"])(e.$router.options.routes,(function(e){return Object(r["J"])((Object(r["q"])(),Object(r["d"])(A,{class:"dropdown-item",to:e.path,key:e.path},{default:Object(r["I"])((function(){return[Object(r["f"])(Object(r["B"])(e.name),1)]})),_:2},1032,["to"])),[[r["F"],"/signin"!==e.path&&"/signup"!==e.path]])})),128))])]),e.authUser&&"admin"===e.authUser.role?(Object(r["q"])(),Object(r["d"])("li",h,[Object(r["g"])(A,{class:"nav-link",to:"/createuser"},{default:Object(r["I"])((function(){return[f]})),_:1})])):Object(r["e"])("",!0),e.authUser?Object(r["e"])("",!0):(Object(r["q"])(),Object(r["d"])("li",m,[Object(r["g"])(A,{class:"nav-link",to:"/signin"},{default:Object(r["I"])((function(){return[p]})),_:1})])),e.authUser?Object(r["e"])("",!0):(Object(r["q"])(),Object(r["d"])("li",g,[Object(r["g"])(A,{class:"nav-link",to:"/signup"},{default:Object(r["I"])((function(){return[k]})),_:1})]))])])])]),Object(r["g"])("main",j,[Object(r["g"])(q)])])}var v=n("5530"),y=n("5502"),A={computed:Object(v["a"])({},Object(y["b"])(["authUser"]))};A.render=O;var q=A,_=(n("d3b7"),n("96cf"),n("1da1")),w=n("6c02"),U={class:"shadow-sm p-4 rounded bg-light",style:{"margin-top":"60px"}},T=Object(r["g"])("h1",{class:"mb-3"},"Добро пожаловать",-1),x={key:0},S=Object(r["g"])("br",null,null,-1),C=Object(r["g"])("br",null,null,-1),E={key:1},L=Object(r["f"])("Войти"),I=Object(r["f"])("Создать аккаунт"),B={key:2,class:"mt-3"},P=Object(r["g"])("strong",null,"Readme:",-1),M=Object(r["f"])(" На данный момент система абсолютно минималистична и в стадии самого начала разработки Для входа как админ используйте следующую комбинацию логина и пароля: admin admin ");function N(e,t,n,a,c,u){var i=Object(r["y"])("router-link");return Object(r["q"])(),Object(r["d"])("div",U,[T,e.authUser?(Object(r["q"])(),Object(r["d"])("div",x,[Object(r["f"])(" Вы вошли как "+Object(r["B"])(e.authUser.login)+" [роль: "+Object(r["B"])(e.authUser.role)+", тарифный план: "+Object(r["B"])(e.authUser.tariff)+", id: "+Object(r["B"])(e.authUser.id)+"] ",1),S,C,Object(r["g"])("button",{type:"button",class:"btn btn-outline-primary",onClick:t[1]||(t[1]=function(e){return u.logout()})},"Выйти")])):(Object(r["q"])(),Object(r["d"])("div",E,[Object(r["g"])(i,{class:"btn btn-primary",to:"/signin"},{default:Object(r["I"])((function(){return[L]})),_:1}),Object(r["g"])(i,{class:"btn btn-primary ml-2",to:"/signup"},{default:Object(r["I"])((function(){return[I]})),_:1})])),e.authUser?Object(r["e"])("",!0):(Object(r["q"])(),Object(r["d"])("div",B,[P,M]))])}var R={computed:Object(v["a"])({},Object(y["b"])(["authUser"])),methods:{logout:function(){localStorage.removeItem("jwtToken"),this.$router.go()}}};R.render=N;var H=R,z=n("bb36"),D={authUser:void 0},G={authUser:function(e){return e.authUser}},J={SET_AUTH_USER:function(e,t){e.authUser=t}},F={getAuthUser:function(){var e=Object(_["a"])(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.commit,e.next=3,z["a"].get("users/auth");case 3:return r=e.sent.data,r&&n("SET_AUTH_USER",r),e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},K={state:D,getters:G,mutations:J,actions:F},$=Object(y["a"])({modules:{user:K}}),Q=[{path:"/",name:"Главная",component:H,meta:{}},{path:"/createuser",name:"Создать пользователя",component:function(){return n.e("chunk-5c83013e").then(n.bind(null,"5635"))},meta:{requiresAuth:!0,requiresAdmin:!0}},{path:"/ATS/Create",name:"Добавить ATS",component:function(){return n.e("chunk-0209f83d").then(n.bind(null,"dae2"))},meta:{requiresAuth:!0,requiresAdmin:!0}},{path:"/ATS/List",name:"Список ATS",component:function(){return n.e("chunk-519dfd6a").then(n.bind(null,"09ea"))},meta:{requiresAuth:!0,requiresAdmin:!0}},{path:"/Hodovye_kachestva/Create",name:"Добавить ходовое качество",component:function(){return n.e("chunk-e92bff2c").then(n.bind(null,"b4da"))},meta:{requiresAuth:!0,requiresAdmin:!0}},{path:"/Hodovye_kachestva/List",name:"Список ходовых качеств",component:function(){return n.e("chunk-2b6c59ac").then(n.bind(null,"aade"))},meta:{requiresAuth:!0,requiresAdmin:!0}},{path:"/Gabarity/Create",name:"Добавить габариты",component:function(){return n.e("chunk-6b5d797b").then(n.bind(null,"5c1c"))},meta:{requiresAuth:!0,requiresAdmin:!0}},{path:"/Gabarity/List",name:"Список габаритов",component:function(){return n.e("chunk-0109e9eb").then(n.bind(null,"27fa"))},meta:{requiresAuth:!0,requiresAdmin:!0}},{path:"/Harakteristiki_dvigatelya/Create",name:"Добавить двигатель и характеристики",component:function(){return n.e("chunk-1251c038").then(n.bind(null,"7cda"))},meta:{requiresAuth:!0,requiresAdmin:!0}},{path:"/Harakteristiki_dvigatelya/List",name:"Двигатели и характеристики",component:function(){return n.e("chunk-a8599adc").then(n.bind(null,"ec94"))},meta:{requiresAuth:!0,requiresAdmin:!0}},{path:"/Informaciya_o_tekhnicheskih_uzlah_i_agregatah/Create",name:"Добавить информацию о технических узлах и агрегатах",component:function(){return n.e("chunk-f6a144c2").then(n.bind(null,"fc29"))},meta:{requiresAuth:!0,requiresAdmin:!0}},{path:"/Informaciya_o_tekhnicheskih_uzlah_i_agregatah/List",name:"Показать информацию о технических узлах и агрегатах",component:function(){return n.e("chunk-414d9a80").then(n.bind(null,"a150"))},meta:{requiresAuth:!0,requiresAdmin:!0}},{path:"/Massa/Create",name:"Добавить массу",component:function(){return n.e("chunk-1c74a68c").then(n.bind(null,"9eb5"))},meta:{requiresAuth:!0,requiresAdmin:!0}},{path:"/Massa/List",name:"Показать массу",component:function(){return n.e("chunk-27a54442").then(n.bind(null,"d121"))},meta:{requiresAuth:!0,requiresAdmin:!0}},{path:"/Transmissiya_i_kolyosa/Create",name:"Добавить трнасмассию и колеса",component:function(){return n.e("chunk-9d5c19fe").then(n.bind(null,"cf47"))},meta:{requiresAuth:!0,requiresAdmin:!0}},{path:"/Transmissiya_i_kolyosa/List",name:"Показать трансмиссию и колеса",component:function(){return n.e("chunk-5269d2e8").then(n.bind(null,"0b9f"))},meta:{requiresAuth:!0,requiresAdmin:!0}},{path:"/signin",name:"Войти",component:function(){return n.e("chunk-2d0d0286").then(n.bind(null,"677f"))},meta:{requiresAuth:!1}},{path:"/signup",name:"Зарегистрироваться",component:function(){return n.e("chunk-5c83ab13").then(n.bind(null,"5c9c"))},meta:{requiresAuth:!1}}],V=Object(w["a"])({history:Object(w["b"])("/"),routes:Q});V.beforeEach(function(){var e=Object(_["a"])(regeneratorRuntime.mark((function e(t,n,r){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log(t,n,r),e.next=3,$.dispatch("getAuthUser");case 3:if(a=e.sent,void 0===t.meta.requiresAuth){e.next=12;break}if(!a||!0!==t.meta.requiresAuth){e.next=9;break}if(!0!==t.meta.requiresAdmin||"admin"===a.role){e.next=8;break}return e.abrupt("return");case 8:r();case 9:a||!1!==t.meta.requiresAuth||r(),e.next=13;break;case 12:r();case 13:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}());var W=V;n("f507"),n("ab8b");Object(r["c"])(q).use($).use(W).mount("#app")},bb36:function(e,t,n){"use strict";var r=n("bc3a"),a=n.n(r);a.a.defaults.baseURL="http://localhost:3001/";var c=localStorage.getItem("jwtToken");c&&(a.a.defaults.headers.common["Authorization"]=c),t["a"]=a.a}});
//# sourceMappingURL=app.3ec09473.js.map